# 플랫폼 구성 및 배포 전략 (Platform Configuration & Deployment Strategy)

## 1. 개요

본 문서는 Navo 플랫폼의 체계적인 개발 및 안정적인 운영을 위한 프론트엔드 및 백엔드 배포 전략을 정의합니다. 각 플랫폼의 강점을 활용하여 효율적인 개발 워크플로우와 확장 가능한 인프라를 구축하는 것을 목표로 합니다.

## 2. 핵심 전략 요약

*   **프론트엔드:** React 기반의 웹 애플리케이션을 Vercel에 배포하여 정적 파일 호스팅 및 빠른 콘텐츠 전송을 활용합니다.
*   **백엔드 (BFF):** Node.js 기반의 BFF(Backend for Frontend)를 Render에 웹 서비스 형태로 배포합니다. 데이터베이스(Postgres) 또한 Render에서 호스팅합니다.
*   **향후 백엔드 확장:** 핵심 백엔드 서비스는 Go로 점진적으로 마이그레이션하며, 이 또한 Render 내부에 배포하여 BFF와 효율적으로 통신하도록 합니다.

## 3. 상세 구성

### 3.1. 프론트엔드 배포 (Vercel)

*   **기술 스택:** React (Webpack으로 빌드)
*   **배포 플랫폼:** Vercel
*   **역할:**
    *   React 애플리케이션의 빌드 결과물(HTML, CSS, JavaScript 등 정적 파일)을 호스팅합니다.
    *   Vercel의 글로벌 CDN을 통해 사용자에게 가장 가까운 곳에서 빠르고 안정적으로 콘텐츠를 전달합니다.
    *   Git 연동을 통한 자동 배포(CI/CD)를 활용하여 개발 생산성을 높입니다.

### 3.2. 백엔드 배포 (Render)

*   **기술 스택:** Node.js (BFF), Postgres (데이터베이스), 향후 Go (핵심 서비스)
*   **배포 플랫폼:** Render
*   **역할:**
    *   **Node.js BFF:** 프론트엔드로부터의 API 요청을 처리하고, 내부 Go 서비스 및 데이터베이스와 통신하여 데이터를 조합하고 비즈니스 로직을 수행합니다. Render의 웹 서비스 형태로 배포됩니다.
    *   **Postgres 데이터베이스:** Drizzle ORM을 통해 관리되는 주 데이터베이스로, Render에서 프로비저닝 및 호스팅됩니다.
    *   **Go 핵심 서비스 (향후):** Node.js BFF 뒤에서 동작할 핵심 백엔드 서비스들은 Go로 개발되며, 이 또한 Render 내부에 웹 서비스 또는 내부 서비스 형태로 배포됩니다.

## 4. 주요 고려사항 및 해결 방안

본 전략 적용 시 다음 사항들을 고려하고 해결해야 합니다.

*   **CORS (Cross-Origin Resource Sharing):**
    *   **문제:** Vercel의 프론트엔드와 Render의 백엔드가 다른 도메인에 있을 경우 발생.
    *   **해결 방안:** Node.js BFF에서 `cors` 미들웨어를 사용하여 프론트엔드 도메인으로부터의 요청을 명시적으로 허용하도록 설정합니다.
*   **환경 변수 관리:**
    *   **문제:** 각 플랫폼(Vercel, Render) 및 서비스(프론트엔드, 백엔드)별로 필요한 환경 변수를 안전하게 관리해야 함.
    *   **해결 방안:** Vercel과 Render가 제공하는 환경 변수 관리 기능을 활용하여 각 서비스에 필요한 변수들을 설정합니다. 민감 정보는 암호화하거나 안전한 방식으로 관리합니다.
*   **도메인 및 DNS 설정:**
    *   **문제:** 사용자 정의 도메인(예: `your-platform.com` 및 `api.your-platform.com`)을 사용 시 정확한 DNS 설정 필요.
    *   **해결 방안:** 도메인 구조를 계획하고, DNS 제공업체에서 Vercel과 Render가 요구하는 A/CNAME 레코드를 정확히 설정합니다.
*   **빌드 프로세스 및 CI/CD 파이프라인:**
    *   **문제:** 각 플랫폼의 배포 파이프라인이 프론트엔드(Webpack) 및 백엔드(tsc) 빌드 명령어를 정확히 실행하도록 구성해야 함.
    *   **해결 방안:** Vercel 및 Render의 Git 통합 기능을 활용하여 코드 푸시 시 자동 빌드 및 배포가 이루어지도록 CI/CD 파이프라인을 설정합니다.
*   **로그 및 모니터링 통합:**
    *   **문제:** 서비스가 두 플랫폼에 분산되어 있어 통합 로깅 및 모니터링이 복잡해질 수 있음.
    *   **해결 방안:** 각 플랫폼의 로깅 기능을 활용하고, 장기적으로는 중앙 집중식 로깅/모니터링 솔루션 도입을 검토합니다. (향후 과제)

## 5. 전략의 중요성

본 배포 전략은 단순히 애플리케이션을 동작시키는 것을 넘어, 다음과 같은 이점을 통해 플랫폼 개발의 효율성과 안정성을 극대화합니다.

*   **조기 아키텍처 검증:** 실제 배포 환경에서 핵심 아키텍처의 유효성을 조기에 검증하여 잠재적 문제를 최소화합니다.
*   **개발 생산성 향상:** 자동화된 CI/CD 파이프라인을 통해 개발 주기를 단축하고 빠른 피드백 루프를 구축합니다.
*   **확장성 및 안정성 확보:** 각 플랫폼의 전문성을 활용하여 서비스의 확장성과 안정성을 보장합니다.
*   **체계적인 개발 기반 마련:** 인프라에 대한 명확한 이해를 바탕으로 개발 팀의 정렬을 돕고, 향후 기능 개발에 집중할 수 있는 환경을 제공합니다.

## 6. 엔드유저 프로젝트 배포 아키텍처 전략

Navo의 핵심 가치인 '사용자 프로젝트 자동 배포' 기능의 아키텍처 전략입니다. 이는 우리 플랫폼의 확장성과 직접적으로 연결됩니다.

### 6.1. Phase 1 (MVP): 단일 플랫폼 배포 (Vercel First)

*   **전략:** 초기 버전에서는 사용자 프로젝트의 배포 대상을 **Vercel로 한정**합니다.
*   **근거:**
    *   **개발 속도:** 단일 플랫폼 API 연동에 집중하여 핵심 기능(AI 코드 생성 → 배포)을 가장 빠르게 시장에 선보일 수 있습니다.
    *   **시장 검증:** 프론트엔드 중심의 프로젝트를 대상으로 Navo의 핵심 가치를 신속하게 검증합니다.
    *   **단순성:** 개발 및 유지보수 복잡성을 최소화하여 안정적인 MVP를 구축합니다.

### 6.2. Phase 2 (Post-MVP): 다중 플랫폼 지원 (Multi-Platform Support)

*   **전략:** MVP 성공 이후, **Render를 포함한 다중 배포 플랫폼 지원**을 로드맵의 최우선 과제로 삼습니다.
*   **근거:**
    *   **시장 확장:** 풀스택 애플리케이션(e.g., Node.js 백엔드 + DB)까지 지원 범위를 넓혀 더 많은 사용자층을 확보합니다.
    *   **유연성 증대:** 사용자 프로젝트의 성격에 맞는 최적의 배포 환경을 선택할 수 있는 유연성을 제공하여 제품 경쟁력을 강화합니다.
    *   **플랫폼 완성도:** Navo를 단순한 '프론트엔드 빌더'가 아닌, 모든 종류의 웹 프로젝트를 위한 '통합 개발 및 배포 플랫폼'으로 발전시킵니다.

---
