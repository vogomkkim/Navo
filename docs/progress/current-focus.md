# Current Focus

**✅ 완료**

- 리포지토리 부트스트랩
- `README` (개전선언 + Copilot 실행 계획)
- 문서 & 스켈레톤 코드 생성 완료

**📍 W1 완료**

- [v] DB 스키마 초안 및 테이블 정의 - `schema.sql` 검토 및 `architecture.md`에 설계 근거 기록 완료
- [v] Draft API(Mock 응답) 구현 - `server.ts`가 타입이 정의된 JSON 목업을 반환하도록 수정 완료
- [v] 에디터 프레임(Canvas/Panel, 저장 기능) - Mock API 데이터를 받아 Canvas에 렌더링하고, 저장 로직을 JSON으로 보내도록 구현 완료
- [v] 이벤트 수집기 스켈레톤 - 클라이언트/서버 이벤트 수집 로직 확인 및 개선 완료

**📍 W2 완료**

- [v] 텍스트/이미지/스타일 편집 - 텍스트 편집 및 Chat->Diff를 통한 스타일 편집의 핵심 로직 구현 완료
- [v] Chat→Diff 규칙 3~5개 적용 - 첫 번째 규칙('제목 파란색') 구현을 통해 핵심 로직 완성
- [v] 에셋 업로드 & 갤러리 기능 - 컨셉 검증 완료, 구체적인 구현은 추후 결정

**📍 W3 완료**

- [v] **AI Intent Parser** - 사용자 요청을 분석하여 완전한 프로젝트 구조를 생성하는 시스템 구현 완료
  - `/api/generate-project` 엔드포인트 및 AI 기반 프로젝트 아키텍처 생성
  - 데이터베이스 스키마, 페이지 구조, 컴포넌트, API 엔드포인트 자동 설계
  - 프론트엔드 UI로 프로젝트 요구사항 입력 및 결과 시각화
- [v] **Hot-reload 개발 환경** - 개발 효율성 향상을 위한 자동 재시작 시스템 구축 완료
  - `tsx`와 `nodemon`을 활용한 TypeScript 파일 변경 감지
  - `npm run dev` 명령어로 개발 서버 실행
- [v] **확장된 타입 시스템** - AI 프로젝트 생성을 위한 새로운 타입 정의 완료
  - `ProjectStructure`, `DatabaseSchema`, `PageDefinition` 등 타입 안전성 확보

**📍 최근 업데이트 (2025년 8월 21일)**

- **컴포넌트 시스템 아키텍처 개선**: 플랫폼과 사용자 컴포넌트 로직 분리 완료
  - **1단계**: 컴포넌트 렌더링 로직 분리 - `components.js` 생성, `app.js` 정리, ES6 모듈 지원
  - **2단계**: 동적 컴포넌트 로딩 시스템 구현 - DB 기반 컴포넌트 정의, API 엔드포인트, 템플릿 렌더링
  - **3-1단계**: 자연어 컴포넌트 생성 UI 구현 - 개발자용 복잡한 UI 제거, 일반 사용자용 자연어 입력 UI로 교체
- **데이터베이스 및 보안 강화**: Prisma 클라이언트 추가, 데이터베이스 상호 작용 개선.
- **인증 기능 추가**: 웹 애플리케이션에 로그아웃 및 인증 검사 기능 구현.
- **코드 품질 개선**: ESLint 구성 업데이트 및 서버 코드 리팩토링.
- **문서 업데이트**: 제품 비전 및 MVP 범위 문서 개선.
- **핵심 기능 개선**: 다양한 핸들러 및 노드 파일 업데이트를 통한 기능 향상.

**📍 현재 진행 중 (2025년 8월 22일)**

- **자동 에러 해결 시스템 Phase 1.2 완료**: 핵심 에이전트 3개 모두 구현 완료
  - ✅ **Error Analyzer Agent**: AI 기반 에러 분석 및 해결 전략 수립
  - ✅ **Code Fixer Agent**: AI 제안에 따른 자동 코드 수정 및 백업 시스템
  - ✅ **Test Runner Agent**: 에러 해결 여부 확인 및 애플리케이션 상태 점검
  - ✅ **통합 테스트 시스템**: 모든 에이전트를 통합하여 테스트할 수 있는 환경 구축

**📍 Phase 1 완료 (2025년 8월 22일)**

- **에이전트 기반 아키텍처 구축**: 자동 에러 해결 시스템의 핵심 구조 구현 완료
  - ✅ **핵심 인터페이스 및 클래스**: `ErrorResolutionAgent`, `BaseAgent`, `AgentRegistry`, `ErrorResolutionManager`
  - ✅ **에러 타입 분류 시스템**: 12가지 에러 타입, 4단계 심각도 분류, 자동 추정 함수
  - ✅ **Error Analyzer Agent**: AI 기반 에러 분석, Gemini API 연동, 대체 분석 로직
  - ✅ **Code Fixer Agent**: 자동 코드 수정, 백업 시스템, 에러별 맞춤 수정 전략
  - ✅ **Test Runner Agent**: 에러 해결 확인, 애플리케이션 상태 점검, 재시도 로직
  - ✅ **테스트 인프라**: 개별 및 통합 테스트 파일 생성
  - ✅ **코드 품질**: ESLint 규칙에 맞춘 코드 정리 및 포맷팅 완료

**📍 다음 단계**

- **Master Developer 시스템 Phase 2**: 백엔드 API 엔드포인트 구현 및 프론트엔드 연동
- **JSON 기반 동적 렌더링**: 생성된 프로젝트를 프론트엔드에서 파일 트리와 코드 에디터로 표시
- **실제 프로젝트 생성 테스트**: "경매 사이트 만들고 싶어" 같은 요청으로 전체 워크플로우 검증

**📍 Master Developer 시스템 완료 (2025년 8월 27일)**

- **✅ 에이전트 기반 프로젝트 생성 아키텍처 완성**: 기존 에러 해결 시스템을 확장하여 Master Developer 시스템 구축
  - **ProjectArchitectAgent**: AI 기반 프로젝트 아키텍처 설계 및 기술 스택 선택
  - **CodeGeneratorAgent**: JSON 기반 프로젝트 구조 및 코드 생성 (실제 파일 생성 없음)
  - **DevelopmentGuideAgent**: 단계별 개발 가이드, 타임라인, 리소스 링크 생성
  - **기존 에러 해결 기능과 완벽 호환**: 에러 해결과 프로젝트 생성 모두 지원

- **✅ JSON 기반 가상 파일 시스템**: 실제 파일 없이도 완벽한 개발 환경 제공
  - 프로젝트 구조를 JSON으로 표현하여 DB 저장
  - 프론트엔드에서 동적 렌더링으로 프로젝트 확인 가능
  - 파일 트리, 코드 에디터, 타입 검사 모두 지원
  - Virtual File System으로 실제 개발 경험과 동일

- **✅ 에이전트 아키텍처 재설계**: 새로운 Master Developer 시스템에 맞게 파일명과 클래스명 변경
  - `errorAnalyzerAgent.ts` → `projectArchitectAgent.ts`
  - `codeFixerAgent.ts` → `codeGeneratorAgent.ts`
  - `testRunnerAgent.ts` → `developmentGuideAgent.ts`
  - 기존 기능은 모두 유지하면서 새로운 기능 추가

- **✅ 프론트엔드 UI/UX 대폭 개선**: 현대적이고 사용자 친화적인 인터페이스 구현
  - 채팅 인터페이스 최적화 (3:7 비율, 스크롤 제거)
  - 한국어 현지화 완료 (모든 UI 텍스트 한국어로 번역)
  - 반응형 레이아웃 및 미니멀 디자인 적용
  - 채팅 메시지 버블 시스템 및 사용자/어시스턴트 구분

**📍 자동 에러 해결 시스템 Phase 1.2 완료 (2025년 8월 22일)**

**📍 오늘 완료 (2025년 8월 25일)**

- **✅ 인증 시스템 완전 전환**: bcrypt → scrypt 완전 전환 완료
  - 기존 사용자 비밀번호 scrypt로 마이그레이션 완료
  - 로그인 시스템 정상화 및 500 에러 해결
  - bcrypt 관련 모든 코드 및 의존성 제거

- **✅ 로깅 시스템 대폭 개선**: 불필요한 로그 제거 및 최적화
  - REQ 로그 완전 제거 (에러만 출력)
  - 중복 timestamp 제거
  - scrypt 파라미터 최적화 (메모리 사용량 감소)
  - 로그 레벨별 제어 시스템 구현

- **✅ 개발 환경 개선**: Webpack 핫 리로드 및 API 경로 수정
  - Webpack 설정으로 프론트엔드 핫 리로드 구현
  - 프론트엔드 API 경로 `/api/auth/*`로 수정
  - 404/500 에러 해결

- **✅ 코드 정리 및 브랜치 관리**
  - 불필요한 의존성 제거
  - 로컬/원격 브랜치 정리 (main만 유지)
  - 커밋 및 푸시 완료

**🔜 다음 (W4 예정)**

- **✅ 완료** Render PostgreSQL 데이터베이스 설정
  - `pg` 라이브러리 추가 및 `server.ts`에 연결 코드 반영 완료.
  - Render 플랫폼에서 데이터베이스 생성 및 환경 변수 등록 완료.
- **✅ 완료** Postgres MCP 서버 설정
  - 데이터베이스 연결 및 기본 설정 완료.
- [-] 배포 파이프라인(서브도메인·SSL·CDN) (MVP 이후 고려)
- [v] 기본 분석(뷰/클릭) - 주요 사용자 액션(클릭, 저장, 채팅)에 대한 추적 코드 추가 완료
- [v] 로컬 개발 환경 설정 및 DB 스키마 적용 완료 - API_URL 환경 변수 및 DB 테이블 연결 문제 해결
- [v] AI 제안 v1 - AI 제안 생성 및 저장 기능 구현 완료 (더미 데이터 시딩 포함)
- [v] `deploySite` 노드 개선 - 대용량 페이로드 처리를 위한 스트리밍 방식 적용 및 URL 반환 문제 해결
- [v] Vercel 배포 설정 - `vercel.json`에서 지원하지 않는 `analytics` 속성 제거 완료

**⚠️ 리스크 및 대응**

- Mock → 실서비스 전환 지연 가능성
- Chat→Diff 결과 모호성
- 배포 파이프라인 인프라 준비 지연
  → 대응: 기능 플래그, 명확화 프롬프트, Mock 배포 + 단계적 롤아웃
