{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Navo API Blueprint",
  "description": "A standard schema for describing a backend API for generation by the Navo AI.",
  "type": "object",
  "required": ["blueprintType", "endpoints"],
  "properties": {
    "blueprintType": {
      "description": "Schema version identifier.",
      "type": "string",
      "const": "API_BLUEPRINT_V1"
    },
    "endpoints": {
      "description": "An array of Endpoint Objects, each defining a single API endpoint.",
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["path", "method", "description", "response"],
        "properties": {
          "path": {
            "description": "The URL path of the endpoint.",
            "type": "string",
            "pattern": "^/"
          },
          "method": {
            "description": "The HTTP method.",
            "type": "string",
            "enum": ["GET", "POST", "PATCH", "DELETE"]
          },
          "description": {
            "type": "string"
          },
          "request": {
            "type": "object",
            "properties": {
              "params": {
                "type": "object",
                "additionalProperties": {
                  "type": "object",
                  "required": ["type", "description"],
                  "properties": {
                    "type": { "type": "string" },
                    "description": { "type": "string" }
                  }
                }
              },
              "body": {
                "type": "object",
                "additionalProperties": {
                  "type": "object",
                  "required": ["type", "description"],
                  "properties": {
                    "type": { "type": "string" },
                    "description": { "type": "string" }
                  }
                }
              }
            }
          },
          "response": {
            "type": "object",
            "minProperties": 1,
            "patternProperties": {
              "^[1-5][0-9]{2}$": {
                "type": "object",
                "required": ["description"],
                "properties": {
                  "description": { "type": "string" },
                  "body": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "object",
                      "required": ["type", "description"],
                      "properties": {
                        "type": { "type": "string" },
                        "description": { "type": "string" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
